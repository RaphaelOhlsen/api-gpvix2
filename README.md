<h1 align="center"> 
	API Rest GPVIX
</h1>
<p align="center">
 <a href="#-sobre-o-projeto">Sobre</a> ‚Ä¢
 <a href="#-gpvix">API GPVIX</a> ‚Ä¢
 <a href="#-tecnologias">Tecnologias</a> ‚Ä¢
 <a href="#-online">Projeto Online</a> ‚Ä¢
 <a href="#-install">Instala√ß√µes</a> ‚Ä¢
 <a href="#-env">Arquivo .env</a> ‚Ä¢
 <a href="#-database">Banco de Dados</a> ‚Ä¢
 <a href="#-swagger">Testando API com Swagger</a> ‚Ä¢ 
 <a href="#-autor">Autor</a>
</p>

<h1 align="center">
  <img alt="authorize" title="#home" src="./git/Swagger_Hero.png" />
</h1>

---

<a id="-sobre-o-projeto"></a>
## üíª Sobre o projeto

üöÄ Neste projeto, foi desenvolvido uma aplica√ß√£o para cadastro de clientes. Utilizado o Banco de Dados Postgre, JWT e Refresh Token, Kenex.js e diversos outros recursos. O objetivo √© aplicar os conhecimentos de backend em uma aplica√ß√£o para utiliza√ß√£o futura em novos projetos tendo este como base. 

&nbsp;

<p align="center">
  <a href="#license"><img src="https://img.shields.io/github/license/LivioAlvarenga/Template-Api-Rest-Node-Docker-Prisma?color=ff0000"></a>
  <a href="https://github.com/LivioAlvarenga/Template-Api-Rest-Node-Docker-Prisma"><img src="https://img.shields.io/github/languages/count/LivioAlvarenga/Template-Api-Rest-Node-Docker-Prisma" alt="total amount of programming languages used in the project" /></a>
  <a href="https://github.com/LivioAlvarenga/Template-Api-Rest-Node-Docker-Prisma"><img src="https://img.shields.io/github/languages/top/LivioAlvarenga/Template-Api-Rest-Node-Docker-Prisma" alt="most used language in the projects" /></a>
<p>

<p align="center">
  <a href= "https://api-rest-node-solid.onrender.com/docs"><img alt="swagger badge" height=40 src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/e8e5c3d2752ae17cbffa11142d8513fe1f405873/files/swagger-badge.svg"></a>
<p>


---


<a id="-gpvix"></a>

## üì∫ API GPVIX

|  GPVIX |                                                                                                                  |
| --------------------- | ---------------------------------------------------------------------------------------------------------------- |
| :sparkles: Nome       | **API Rest NodeJs**                                                                 |
| :label: Tecnologias   | NodeJs, TypeScript, .ENV, Express, Knex, Yup, PostGre, Jest, Swagger, EsLint, Prettier, Insomnia e JSON Web Token. |                                                                 |
---

<a id="-tecnologias"></a>

## üõ† Tecnologias

As seguintes ferramentas foram usadas na constru√ß√£o do projeto

&nbsp;

<p align="center">
  <!-- <a href= ""><img alt="" src="https://img.shields.io/static/v1?logoWidth=15&logoColor=ECD53F&logo=.ENV&label=Managing Environment Variables&message=.ENV&color=ECD53F"></a> -->
  <a href= "https://nodejs.org/en/" target="_blank" rel="noopener noreferrer"><img alt="Node.js badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/nodejs-badge.svg"></a>
  <a href= "https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer"><img alt="TypeScript badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/typescript-badge.svg"></a>
  <a href= "https://www.dotenv.org/" target="_blank" rel="noopener noreferrer"><img alt="Dotenv badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/4eed338fdcd547570ed365f2b344e43c8202e88f/files/dotenv-badge.svg"></a>
  <a href= "https://insomnia.rest/" target="_blank" rel="noopener noreferrer"><img alt="Insomnia badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/insomnia-badge.svg"></a>
  <a href= "https://swagger.io/"><img alt="swagger badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/e8e5c3d2752ae17cbffa11142d8513fe1f405873/files/swagger-badge.svg"></a>
  <a href= "https://jwt.io/"><img alt="JSON Web Tokens Badge" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/af3b694b2d536d66113468df616d3f165d881eb7/files/jwt-badge.svg"></a>
  <a href= "https://code.visualstudio.com/download" target="_blank" rel="noopener noreferrer"><img alt="vscode download" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/vsCode-badge.svg"></a>
  <a href= "https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer"><img alt="code formatter prettier" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/2467074c4c912dd04b12bcee1076cb5ca7ba9eaf/files/prettier-badge.svg"></a>
  <a href= "https://eslint.org/" target="_blank" rel="noopener noreferrer"><img alt="code standardization eslint" src="https://raw.githubusercontent.com/LivioAlvarenga/LivioAlvarenga/59575ed19b13121cd113cfc66a71f18dea210c79/files/eslint-badge.svg"></a>
</p>

---

<a id="-online"></a>

## üåê Projeto Online

A aplica√ß√£o se encontra em produ√ß√£o e est√° hospedada na Digital Ocean atrav√©s deste [link](https://oyster-app-sjykt.ondigitalocean.app/api-docs/). A √°rea de documenta√ß√£o √© aberta mas a maioria das rota requer autoriza√ß√£o. Caso queira acesso tempor√°rio a aplica√ß√£o entre em [contato](https://mocad.dev/#contato).


---

<a id="-install"></a>

### ‚öôÔ∏è Instala√ß√µes

&nbsp;

## Instalando o projeto

```bash
# Clone este reposit√≥rio
$ git clone https://github.com/RaphaelOhlsen/api-gpvix2.git
```

```bash
# Acesse a pasta do projeto no terminal/cmd
cd api-gpvix2
```
```bash
# Instala√ß√£o da pasta node_modules
$ yarn install
```
---

<a id="-env"></a>

## üìù Arquivo .env


Na raiz do projeto renomeie o arquivo *.env.example* para *.env* e abra o arquivo. Neste arquivo temos as seguintes vari√°veis:

**`PORT`**:  insira o valor na qual a aplica√ß√£o ir√° trabalhar em modo de desenvolvimento.

```.env
# Exemplo
PORT=3333
```

**`NODE_ENV`**:  vari√°vel usada para indicar o ambiente de execu√ß√£o no qual a aplica√ß√£o est√° sendo executada. Vamos trabalhar em ambiente de desenvolvimento.

```.env
# Exemplo
NODE_ENV=development
```

**`IS_LOCALHOST`**:  Preencha com true. Tanto esta var√°vel quanto a var√°vel acima ir√£o inicar o projeto no modo de desenvolvimento. 

```.env
# Exemplo
IS_LOCALHOST=true
```
**`JWT_SECRET`**:  √â importante entender que esta vari√°vel √© usada para garantir a autenticidade e a integridade dos tokens JWT, protegendo a aplica√ß√£o contra manipula√ß√£o e falsifica√ß√£o. 
**Recomenda-se armazenar a chave em um local seguro e n√£o compartilh√°-la ou exp√¥-la desnecessariamente.** 
Voc√™ pode usar o site: [onlinehashtools.com/generate-random-md5-hash](https://onlinehashtools.com/generate-random-md5-hash) para gerar a sua vari√°vel.

```.env
# Exemplo
JWT_SECRET=b2e2a8efbdf11a5ed02c9ea76f46082e
```

**`CORS_ORIGIN`**: Esta vari√°vel permite definir a lista de dom√≠nios (ou URLs) que s√£o permitidos fazer solicita√ß√µes para a sua aplica√ß√£o. 
Ao configurar a chave CORS_ORIGIN com um valor espec√≠fico, voc√™ est√° permitindo que apenas esses dom√≠nios tenham acesso aos recursos da sua aplica√ß√£o atrav√©s de solicita√ß√µes CORS. 
Para o nosso exemplo vamos liberar para a [aplica√ß√£o frontend](https://github.com/RaphaelOhlsen/dashboard-gpvix2) que √© parte integrante do nosso projeto. Mas n√£o necessariamente precisamos acessar esta API pela aplica√ß√£o frontend. Pode ser feita atrav√©s da documenta√ß√£o Swagger que posteriormente iremos descrever. Exemplo CORS_ORIGIN=http://127.0.0.1:3000

**As demais vari√°veis s√£o utilizadas em ambiente de produ√ß√£o e n√£o ser√£o comentadas nesta arquivo. Caso tenha interesse pode entrar em [contato](https://mocad.dev/#contato).**

---

<a id="-database"></a>

## üé≤ Banco de Dados

No ambiente de desenvolvimento utilizamos o SQLite. Este banco √© um sistema de gerenciamento de banco de dados relacional (SGBDR) que √© embutido diretamente em aplicativos. Diferente dos bancos de dados tradicionais, como MySQL ou PostgreSQL, que s√£o executados em um servidor separado, o SQLite opera como uma biblioteca dentro do aplicativo, armazenando os dados em um √∫nico arquivo e √© muito utilizado em ambientes de teste e desenvolvimento.


```bash
# Instala√ß√£o do Banco de Dados
$ yarn knex:migrate
```
```bash
# Populando o Banco de Dados
$ yarn knex:seed
```
Em seguida na raiz do projeto podemos verificar o arquivo `database.sqlite` se obtivermos sucesso.

### üìãTabelas
No banco de dados temos 3 tabelas. S√£o elas:

+ **city**: Encontra-se preenchida com as cidades do meu estado (Esp√≠rito Santo).
+ **person**: Tabela onde ser√£o armazenados os dados dos clientes. Possui as colunas `FullName`, `email` e `cityId` que √© uma *"chave estrangeira"* (*foreign key*, em ingl√™s). Esta coluna em quest√£o faz refer√™ncia √† chave prim√°ria da tabela city, estabelecendo uma rela√ß√£o entre elas.
+ **user**: Tabela onde ser√£o cadastrados as informa√ß√µes dos administradores do sistema. Possui as colunas `mame`, `email`, `password`, `role`. Esta √∫ltima coluna define os poderes de *autoriza√ß√£o de uso* em partes do sistema. Por exemplo, somente usu√°rios com "role" iqual a `sadmin` poder√£o criar, alterar, atualizar, listar e deletar usu√°rios. Importante informar que para fins de testes o banco de dados j√° foi populado com o usu√°rio `Sadmin`, que tem as informa√ß√µes de login: `email: sadmin@teste.com`, `password: senha123 `e `role: sadmin`, esta √∫ltima d√° poderes administrativos totais para a aplica√ß√£o.

---

<a id="-swagger"></a>
## üìÑ Testando API com Swagger

Swagger √© uma estrutura de c√≥digo aberto que permite criar, documentar e testar APIs de forma f√°cil e eficiente. √â amplamente utilizado para descrever e documentar APIs RESTful, fornecendo uma representa√ß√£o visual interativa da API.
A principal finalidade do Swagger √© melhorar a comunica√ß√£o entre os desenvolvedores da API e os consumidores da API (como desenvolvedores de aplicativos ou clientes). Com o Swagger, √© poss√≠vel descrever detalhadamente os endpoints da API, os par√¢metros necess√°rios, os tipos de dados esperados, as respostas poss√≠veis e at√© mesmo fornecer exemplos de uso.

### Iniciando a API

```bash
# Inciando a aplica√ß√£o
$ yarn start
```
Tudo dando certo o pronpt ir√° retornar a mensagem `Server is running on port 3333`

### Acessando a documenta√ß√£o Swagger
Abra o seu navegador e entre com a seguinte URL localhost:3333/api-docs/

Voce visualizar√° a seguinte p√°gina:

<h1 align="center">
  <img alt="swagger" title="#home" src="./git/Swagger_inicial.png" />
</h1>

Para fazer login, clique em `Users - POST /signin`. Na parte direita, clique no bot√£o `Try it out`. Em seguida, no corpo da requisi√ß√£o (Request Body), entre com os dados do usu√°rio Admin (`email: sadmin@teste.com`, `password: senha123`) . Por fim, clique no bot√£o azul `Execute` para prosseguir.

Rolando a tela um pouco abaixo voc√™ ver√° o campo `Responses` como na figura abaixo:

<h1 align="center">
  <img alt="swagger" title="#home" src="./git/Swagger_signin.png" />
</h1>

Copie a informa√ß√£o de accessTokem. 

No in√≠cio da p√°gina do lado direito clique no bot√£o `Authorize` como na figura abaixo:

<h1 align="center">
  <img alt="authorize" title="#home" src="./git/Swagger_Authorize.png" />
</h1>

Cole a informa√ß√£o de accesToken no campo Value e clique em Authorize e em seguida o bot√£o Close. Agora voc√™ poder√° usar qualquer rota que requisite autentica√ß√£o. As rotas que demandam autentica√ß√£o s√£o sinalizadas com um cadeado na parte direita extrema da rota. 

Agora voc√™ pode testar todas as demais rotas, a documenta√ß√£o √© auto explicativa e qualquer d√∫vida entre em [contato](https://mocad.dev/#contato).
 **Divirta-se!!!**

---
<a id="-autor"></a>
## üë®‚Äçüíª Autor
Ol√°, meu nome √© Raphael Ohlsen, Engenheiro de Telecomunica√ß√µes | BackEnd e FrontEnd Developer. Em transi√ß√£o de carreira de Telecom para Developer que √© minha verdadeira paix√£o. Sou aficcionado por tecnologia e programa√ß√£o. D√∫vidas, sugest√µes e cr√≠ticas s√£o super bem vindas. Seguem meus contatos.

- [www.mocad.dev](https://mocad.dev)
- [raphael@mocad.dev](raphael@mocad.dev)

<p align="center">Redes Sociais</p>
<p align="center">
  <a href= "https://github.com/RaphaelOhlsen"><img alt="" src="./git/github.png"></a>
  <a href= "https://www.linkedin.com/in/raphael-bernardo-ohlsen-79115689/"><img alt="" src="./git/linkedin.png"></a>
</p>